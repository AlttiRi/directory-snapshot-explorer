var e=Object.defineProperty,__publicField=(t,n,a)=>(((t,n,a)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a})(t,"symbol"!=typeof n?n+"":n,a),a);import{r as t,c as n,i as a,t as s,s as o,w as r,a as i,b as l,d as c,e as u,f as d,o as p,g as f,h,j as v,u as m,k as g,l as y,m as b,n as S,p as w,q as _,F as k,v as z,x as T,y as D,z as E,A as M,B as x,C,D as I,E as P,G as $,H as j,I as F,J as L,T as B,K as R,L as W,M as A,N as O}from"./vendor.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&processPreload(e)})).observe(document,{childList:!0,subtree:!0})}function processPreload(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const N=globalThis.setImmediate||function(){const{port1:e,port2:t}=new MessageChannel,n=[];return e.onmessage=function(){n.shift()()},function(e){t.postMessage(null),n.push(e)}}();function sleep(e){return new Promise(void 0===e?e=>N(e):t=>setTimeout(t,e))}const H=["mp4","webm","mkv","avi","mov","m4v","m4v","mpg","mpeg","wmv","flv"];const U=["jpg","png","jpeg","gif","webp","jfif","jpe","tiff"];const q=["mp3","flac","wav","wma","aac"];function firefoxDateFix(e){return"string"==typeof(t=e)||t instanceof String?e.replace(/(?<y>\d{4})\.(?<m>\d{2})\.(?<d>\d{2})/,"$<y>-$<m>-$<d>"):e;var t}function dateToDayDateString(e,t=!0){e=firefoxDateFix(e);const n=new Date(e);function pad2(e){return e.toString().padStart(2,"0")}"Invalid Date"===n.toString()&&console.warn("Invalid Date value: ",e);const a=t?"UTC":"",s=n[`get${a}FullYear`](),o=n[`get${a}Month`]()+1,r=n[`get${a}Date`]();return s+"."+pad2(o)+"."+pad2(r)}function dateToDayDateTimeString(e,t=!0){e=firefoxDateFix(e);const n=new Date(e);function pad2(e){return e.toString().padStart(2,"0")}const a=t?"UTC":"",s=n[`get${a}Hours`](),o=n[`get${a}Minutes`](),r=n[`get${a}Seconds`](),i=pad2(s)+":"+pad2(o)+":"+pad2(r);return dateToDayDateString(n,t)+" "+i+(t?"Z":"")}async function*iterateAsyncDataSource(e){if(e instanceof Response&&(e=e.body),e instanceof ReadableStream)yield*async function*(e){const t=e.getReader();for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}(e);else if(e instanceof Blob)for(const t of function*(e,t=2097152){let n=0;for(;;){const a=e.slice(n,n+t);if(!a.size)break;yield read(a),n+=t}async function read(e){return new Uint8Array(await e.arrayBuffer())}}(e))yield await t}function tripleSizeGroups(e){const t=e.toString();return t.padStart(t.length+(3-t.length%3)).match(/(.{3})/g).join(" ").trimStart()}function bytesToSize(e,t=2){if(0===e)return"0 B";t=t<0?0:t;const n=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,n)).toFixed(t))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function bytesToSizeWinLike(e){if(e<1024)return e+" B";let t=Math.floor(Math.log(e)/Math.log(1024)),n=e/Math.pow(1024,t);return n>=1e3&&(t++,n/=1024),function(e){let t;e<10?t=Math.trunc(100*e)/100:e<100?t=Math.trunc(10*e)/10:e<1e3&&(t=Math.trunc(e));if(e<.1)return t.toPrecision(1);if(e<1)return t.toPrecision(2);return t.toPrecision(3)}(n)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}function blue(e){return[`%c${e}`,"color: #2196f3; font-weight: bold;"]}const G=t(!0),Z=t("mtime"),J=t("name"),K=t({name:!1,size:!1,time:!1}),V=n((()=>K.value[J.value]));function toggleOrder(){K.value[J.value]=!K.value[J.value]}const{compare:X}=new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"});function comparator(e,t){const n=V.value?-1:1;if(G.value){if("name"===J.value)return X(e.name,t.name)*n;if("size"===J.value)return(e.size-t.size)*n;if("time"===J.value){const a=Z.value;return(e[a]-t[a])*n}}return 0}const Y=n((()=>[...Ce.value.folders.sort(comparator),...Ce.value.files.sort(comparator),...Ce.value.symlinks.sort(comparator),...Ce.value.fifos.sort(comparator),...Ce.value.charDevs.sort(comparator),...Ce.value.blockDevs.sort(comparator),...Ce.value.sockets.sort(comparator)])),Q=t(50),ee=n((()=>ve.value.length?me.value:Y.value)),te=n((()=>ee.value.slice(0,Q.value))),ne=n((()=>me.value.length>Q.value?me.value.length:ee.value.length)),ae=t(null);Object.defineProperty(globalThis,"list",{get:()=>ee.value}),Object.defineProperty(globalThis,"names",{get:()=>ee.value.map((e=>e.name))});const se=t("");function addMessage(e){se.value=e}function appendMessage(e){se.value+=e}function debugMessageFromEntry(e){if(console.log(a(e)?"Proxy:":"Raw:",s(e)),e.hasErrors)se.value="";else{const t=e.name?'"'+e.name.slice(0,20)+(e.name.length<20?"":"…")+'"':"";let n=[];void 0!==e.mtime&&n.push(`mtime "${dateToDayDateTimeString(e.mtime,!1)}"`),void 0!==e.btime&&n.push(`btime "${dateToDayDateTimeString(e.btime,!1)}"`),n=[...n,t,`${tripleSizeGroups(e.size)} (${bytesToSizeWinLike(e.size)})`],se.value=n.filter((e=>e)).join(" — ")}}const oe=["folder","file","symlink","fifo","charDev","blockDev","socket"];class SimpleEntry{constructor(e,t,n){this.name=e.name,this.parent=t,this.type=e.type,e.size&&(this._size=e.size),e.mtime&&(this._mtime=e.mtime),e.btime&&(this.btime=e.btime),e.errors&&(this.errors=e.errors.map((e=>n.get(e)))),e.pathTo&&(this.pathTo=e.pathTo),e.content&&(this.content=e.content),null==t||t.addChild(this)}addChild(e){this.children||(this.children=[]),this.children.push(e),this.increaseContentSize(e.size)}addHardlinks(e,t){this.hardlinks=e,this.hardlinksTotal=t}addMeta(e){this.meta=e}increaseContentSize(e){e&&(this._contentSize||(this._contentSize=0),this._contentSize+=e,this.parent&&e&&this.parent.increaseContentSize(e))}get mtime(){if(void 0!==this._mtime)return this._mtime;if("folder"===this.type&&this.children){let e=Number.MIN_SAFE_INTEGER;for(const t of this.children)t.mtime>e&&(e=t.mtime);if(e!==Number.MIN_SAFE_INTEGER)return e}}get size(){return"folder"===this.type?this._contentSize||0:this._size||0}get folders(){var e;return(null==(e=this.children)?void 0:e.filter((e=>"folder"===e.type)))||[]}get files(){var e;return(null==(e=this.children)?void 0:e.filter((e=>"file"===e.type)))||[]}get symlinks(){var e;return(null==(e=this.children)?void 0:e.filter((e=>"symlink"===e.type)))||[]}get fifos(){var e;return(null==(e=this.children)?void 0:e.filter((e=>"fifo"===e.type)))||[]}get charDevs(){var e;return(null==(e=this.children)?void 0:e.filter((e=>"charDev"===e.type)))||[]}get blockDevs(){var e;return(null==(e=this.children)?void 0:e.filter((e=>"blockDev"===e.type)))||[]}get sockets(){var e;return(null==(e=this.children)?void 0:e.filter((e=>"socket"===e.type)))||[]}get isEmpty(){var e;return!Boolean(null==(e=this.children)?void 0:e.length)}get hasErrors(){var e;return Boolean(null==(e=this.errors)?void 0:e.length)}get root(){return this.parent?this.parent.root:this}get path(){return this.parent?[...this.parent.path,this]:[this]}get contentTypesStats(){return this.getContentTypesStats()}_getContentTypesStats(e=!0,t={},n=this){if("folder"===n.type&&n.children){for(const a of n.children)t[a.type]?t[a.type]++:t[a.type]=1,"folder"===a.type&&e&&this._getContentTypesStats(e,t,a);return t}}getContentTypesStats(e=!0){console.time("getContentTypesStats");const t=this._getContentTypesStats(e);return console.timeEnd("getContentTypesStats"),t}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}flat(){return[...this]}static flat(e){return e.map((e=>[...e])).flat()}get pathString(){return this.getPathString()}getPathString(e){const t=this.path.map((e=>e.name));let n;return n=(null==e?void 0:e.path)?[...e.path,...t].join(e.separator||"/"):t.join("/"),n.startsWith("//")?n.slice(1):n}}class EntryStreamParser{constructor(){this.rootId=0,this.map=new Map,this.hidMap=new Map}setMeta(e){this.meta=e;const t=e.errorsMap;t&&(this.errorsIDMap=new Map(Object.entries(t).map((([e,t])=>{const[n,a,s]=e.split(":");return[t,{code:n,syscall:a,errno:Number(s)}]}))))}parse(e){var t;let n=!1;for(const a of e){const e=null!=(t=this.map.get(a.pid))?t:null,s=new SimpleEntry(a,e,this.errorsIDMap);if("folder"===a.type&&this.map.set(a.id,s),a.hid){const e=this.hidMap.get(a.hid)||[];this.hidMap.set(a.hid,[...e,s])}a.pid===this.rootId&&(n=!0)}return{root:this.map.get(this.rootId),rootUpdated:n,processed:e.length}}processHIDMapAsync(){this.hidMap.size&&(console.log("[hidMap]:",this.hidMap),console.time("hidMap"),async function(e){let t=0,n=0;for(const[a,s]of e.entries()){if(!(t++%1e3)){const e=Date.now();e-n>15&&(n=e,await sleep())}const e=Number(a.split(":")[1]);s.forEach((t=>{t.addHardlinks(s,e)}))}}(this.hidMap).then((()=>console.timeEnd("hidMap"))))}}const re=new SimpleEntry({type:"folder",name:"",pid:null},null);const ie=t(!1),le=t(!0),ce=t(0),ue=t(0),de=t(0),pe=t(!1),fe=t(!1),he={},__vitePreload=function(e,t,n){if(!t||0===t.length)return e();const a=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in he)return;he[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(!!n)for(let n=a.length-1;n>=0;n--){const s=a[n];if(s.href===e&&(!t||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${e}"]${s}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((t,n)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))};async function handleMegaUrl(e){let t;addMessage(e),globalThis.Mega=await __vitePreload((()=>import("https://alttiri.github.io/meganz-api/meganz-api.standalone.es.js")),[],import.meta.url);try{t=await globalThis.Mega.node(e)}catch(s){return void addMessage(s)}t=t.root,console.log(t);let n=parseMegaNode(t);n._url=e,console.log(n);const a={url:e,id:n._id,ownerId:n._ownerId,btime:n.btime&&dateToDayDateTimeString(n.btime),mtime:n.mtime&&dateToDayDateTimeString(n.mtime)};if("folder"!==n.type){const e=new SimpleEntry({type:"folder",name:"",pid:null},null);e.addChild(n),n=e}n.root.addMeta({special:a}),openFolder(n)}function parseMegaNode(e,t=null){const n=function(e,t){const n={name:null===(a=e).name?"[encrypted]":a.name,size:a.size,btime:1e3*a.creationDate,mtime:1e3*a.modificationDate,id:a.id,type:"rootFolder"===a.type||"folder"===a.type?"folder":"file",pid:a.parentId};var a;const s=new SimpleEntry(n,t);return s._id=e.id,s._ownerId=e.ownerId,s}(e,t);if("folder"===n.type)for(const a of[...e.folders,...e.files])parseMegaNode(a,n);return n}const ve=t("");function clearSearch(){console.log("[clearSearch]"),ve.value=""}const me=o([]);function setSearchResult(e){const t=s(e);me.value=t,Q.value=50,function(e){globalThis.search=e,console.log("globalThis.search:",e),Object.defineProperty(globalThis.search,"download",{get(){console.log("download")}}),Object.defineProperty(globalThis.search,"names",{get:()=>globalThis.search.map((e=>e.name))}),Object.defineProperty(globalThis.search,"namelist",{get:()=>globalThis.search.map((e=>e.name)).join("\n")})}(t)}function sortSearch(){const e=Date.now();me.value.sort(comparator);const t=Date.now()-e;return console.log("[search][sort][time]",t,"ms"),l(me),t}r([J,V,Z],(()=>{sortSearch()}));let resolve=()=>{},ge=Promise.resolve(!0);function simplify(e){return e.toLowerCase()}i((()=>{le.value?resolve(!0):(resolve(!1),ge=new Promise((e=>resolve=e)))})),window.addEventListener("storage",(e=>{"search-sync"===e.key&&(document.querySelector("input").value=e.newValue,document.querySelector("input").dispatchEvent(new Event("input")))}));const ye=function(e,t=50){let n;return function(){n&&clearTimeout(n),n=setTimeout((()=>{e.apply(this,arguments),n=null}),t)}}(performSearch,300);async function performSearch(){if(pe.value)return void console.log("[return][already searching]");const e=new URL(location.href).searchParams.get("searchSync");if(e&&(localStorage.setItem("search-sync",ve.value),document.title="Search..."),pe.value=!0,!1===await ge)return void console.log("[return][scan parsing completed]");console.log("[next][scan parsing completed]");const t=Ce.value,n=ve.value;if(""===n)return pe.value=!1,void(fe.value=!1);const a=c(t)?s(t):t,o=performance.now(),{result:r,search:i}=await async function(e,t){var n,a,s,o;let r;if(console.log("[search]      ",t),t.startsWith("//"))r=!0,t=t.slice(2);else{r=!1;const d=simplify(t);d!==t&&(console.log("[search][norm]",d),t=d)}let i=null,l="includes";if(t.startsWith("/*/")||t.startsWith("/8/")){const p=t.slice("/*/".length),f=p.startsWith("*"),h=p.endsWith("*");f&&h?(l="includes",i=`includes "${t=p.slice(1,-1)}"`):f?(l="endsWith",i=`ends with "${t=p.slice(1)}"`):h?(l="startsWith",i=`starts with "${t=p.slice(0,-1)}"`):(l="===",i=`matches "${t=p}"`)}let c;c=r?"==="===l?(e,t)=>e===t:(e,t)=>e[l](t):"==="===l?(e,t)=>simplify(e)===t:(e,t)=>simplify(e)[l](t);function justSearch(t){return findAll(e,(e=>c(e.name,t)))}if(["https://","http://"].some((e=>t.startsWith(e)))){const v=new URL(t);if("www.youtube.com"===v.hostname&&"/watch"===v.pathname)t=v.searchParams.get("v");else{const m=v.pathname.length>1&&v.pathname.endsWith("/"),g=null==(n=(m?v.pathname.slice(0,-1):v.pathname).match(/[^\/]+$/))?void 0:n[0];if(!g)return{result:[],search:t};const{name:y,ext:b}=(null==(a=g.match(/(?<name>.+)(\.(?<ext>.+))$/))?void 0:a.groups)||{name:g};t=y+(m&&b?`.${b}`:"")}return{result:await justSearch(t),search:t}}const u="\\/s(ize)?(?<defaultPrefix>b|k|m|g|t)?[:\\/]";if(t.match(new RegExp(u))){const S=new RegExp(u+"(?<extra1>(?<caret>\\^)|(?<dollar>\\$)|(?<percent>%))?"+"((?<sizeString1>\\s*\\d[\\d\\s\\,]*)((?<dotDecimal1>\\.(?<decimal1>\\d+)?))?(?<prefix1>b|k|m|g|t)?(?<exclamations>!+)?)"+`(?<range>${"(?<extra2>(?<plus>\\+)|(?<minus>\\-)|(?<tildes>\\~+))"}${"((?<sizeString2>\\s*-?\\s*\\d[\\d\\s\\,]*)((?<dotDecimal2>\\.(?<decimal2>\\d+)?))?(?<prefix2>b|k|m|g|t)?)?"})?`),{defaultPrefix:w,caret:_,dollar:k,percent:z,sizeString1:T,decimal1:D,prefix1:E,exclamations:M,plus:x,minus:C,tildes:I,sizeString2:P,decimal2:$,prefix2:j}=(null==(s=t.match(S))?void 0:s.groups)||{};if(T){let F,L,multiplyByPrefix=function(e,t="b"){if(void 0===e)return;const n=["b","k","m","g","t"];return Math.trunc(e*1024**n.indexOf(t))};console.log({defaultPrefix:w,extra1:{caret:_,dollar:k,percent:z},sizeString1:T,decimal1:D,prefix1:E,exclamations:M,extra2:{plus:x,minus:C,tildes:I,sizeString2:P,decimal2:$,prefix2:j}});let B=Number(T.replaceAll(/[\s,]/g,""));const R=B.toString();let W=P&&Number(P.replaceAll(/[\s,]/g,""));const A=null==W?void 0:W.toString(),O=D?Number("0."+D):0,N=$?Number("0."+$):0;async function rangeSearch(t,n){const{_min:a,max:s}=t<n?{_min:t,max:n}:{_min:n,max:t},o=Math.max(0,a);F=`Size search from ${bytesToSizeWinLike(o)} to ${bytesToSizeWinLike(s)}`,L=await findAll(e,(e=>e.size>=o&&e.size<=s))}if(B=multiplyByPrefix(B+O,E||w),W=multiplyByPrefix(W+N,j||w),_)F=`Size search starts with "${R}"`,L=await findAll(e,(e=>e.size.toString().startsWith(R)));else if(k)F=`Size search ends with "${R}"`,L=await findAll(e,(e=>e.size.toString().endsWith(R)));else if(z)F=`Size search includes "${R}"`,L=await findAll(e,(e=>e.size.toString().includes(R)));else if(x&&A)await rangeSearch(B,B+W);else if(C&&A)await rangeSearch(B,W);else if(I)if(A)await rangeSearch(B-W,B+W);else{const H=I.length,U=Math.trunc(5*B*H/100);await rangeSearch(B-U,B+U)}else{const q=E||w;if(q&&"b"!==q){let G=R.length,Z=multiplyByPrefix(1,q);1===G&&(Z=Math.trunc(Z/10));let J=B-Z,K=B+Z;M&&(J=B,M.length>1&&(K=B+Math.trunc(Z/10))),await rangeSearch(J,K)}else F=`Size search ${bytesToSizeWinLike(B)}`,L=await findAll(e,(e=>e.size===B))}return console.log(...blue(F)),{result:L,search:F}}{const V="No size to search";return console.log(...blue(V)),{result:[],search:V}}}if(t.startsWith("/")){const{type:X,word:Y}=(null==(o=t.match(/\/type:(?<type>[^\/]+)\/?(?<word>[^\/]*)/))?void 0:o.groups)||{};if(X&&(console.log({type:X,word:Y}),oe.includes(X))){return{result:await findAll(e,(e=>e.type===X&&c(e.name,Y))),search:t}}}else if(t.includes(" ")){const Q=t.split(" ").filter((e=>e));if(Q.length>1){let ee,te=await justSearch(Q.shift());for(;ee=Q.shift();)te=te.filter((e=>c(e.name,ee)));return{result:te,search:t}}}return{result:await justSearch(t),search:i||t}}(a,n);if(pe.value=!1,ve.value!==n)return console.log("[return][new search requested]"),performSearch();if(fe.value=!1,!r)return;addMessage(`Search time: ${(performance.now()-o).toFixed(2)} ms; `),await sleep(),setSearchResult(r);appendMessage(`Sort time: ${sortSearch().toFixed(2)} ms; `),await sleep(),console.time("search result size computing");const l=new Set(r),u=r.reduce(((e,t)=>computeEntrySize(t,l)+e),0),d=r.filter((e=>"folder"!==e.type)).reduce(((e,t)=>t.size+e),0);console.timeEnd("search result size computing"),console.log({allSize:u,filesSize:d}),appendMessage(`${r.length} items; size: ${bytesToSizeWinLike(d)} (${bytesToSizeWinLike(u)});  search: ${i}`),e&&(document.title=`[${r.length}] found`)}function computeEntrySize(e,t){if("folder"!==e.type)return e.size;let n=0;for(const a of e.children||[])t.has(a)||("folder"===a.type?n+=computeEntrySize(a,t):n+=a.size);return n}async function findAll(e,t){let n=[],a=Date.now();for(const s of function*(e){const t=1e3;let n=[];function*takePart(e){for(const a of e.children||[])"folder"===a.type&&(yield*takePart(a)),n.push(a),n.length===t&&(yield n,n=[])}yield*takePart(e),yield n}(e)){const e=Date.now();e-a>15&&(a=e,await sleep());for(const a of s)t(a)&&n.push(a)}return n}async function*parseScan(e){const t=new EntryStreamParser;let n,a;if(e instanceof Response?n=e.headers.get("content-type"):e instanceof Blob&&(n=e.type),function(e){return Boolean(e.match(/^application\/.*?gzip/))}(n)){console.log("parseGZippedJSONScan");for await(const n of async function*(e){const t=new TextDecoder,n=new TextParser;let a=0,s=0;for await(const o of async function*(e){be||await async function(){if(!be){const e="https://cdn.jsdelivr.net/npm/pako@2.0.4/dist/pako_inflate.min.js",t="sha256-ZIKs3+RZEULSy0dR6c/mke8V9unZm9vuh05TqvtMdGU=";await function(e,t){return new Promise(((n,a)=>{const s=document.createElement("script");s.onload=n,s.onerror=n=>a({message:"Failed to load script",src:e,integrity:t,event:n}),s.src=e,s.async=!0,t&&(s.integrity=t,s.crossOrigin="anonymous"),document.body.append(s)}))}(e,t),be=!0,console.log("pako is loaded")}}();let t=[];const n=new pako.Inflate;pako.Inflate.prototype.onData=function(e){t.push(e)};for await(const a of iterateAsyncDataSource(e)){n.push(a);for(const e of t)yield e;t=[]}yield n.result,n.err&&console.error(n.msg)}(e)){if(!(a++%20)){const e=Date.now();e-s>15&&(s=e,await sleep())}const e=t.decode(o,{stream:!0}),r=n.parsePart(e);r.length&&(yield r)}}(e))a||(a=n.shift(),t.setMeta(a)),yield{meta:a,...t.parse(n)}}else if(function(e){return Boolean(e.match(/^application\/.*?json/))}(n)){console.log("streamParseJSONScan");for await(const n of async function*(e){const t=new TextDecoder,n=new TextParser;let a=0,s=0;for await(const o of iterateAsyncDataSource(e)){if(!(a++%10)){const e=Date.now();e-s>15&&(s=e,await sleep())}const e=t.decode(o,{stream:!0}),r=n.parsePart(e);r.length&&(yield r)}}(e))a||(a=n.shift(),t.setMeta(a)),yield{meta:a,...t.parse(n)}}t.processHIDMapAsync()}r(ve,(async(e,t)=>{if(!e)setSearchResult([]);else if(fe.value=!0,e.length-t.length>1){if(e.startsWith("https://mega.nz/"))return void(await handleMegaUrl(e));await performSearch()}else await ye()}));class TextParser{constructor(){__publicField(this,"buffer",""),__publicField(this,"startHandled",!1),__publicField(this,"metaLines",[]),__publicField(this,"objects",[])}trimComma(e){return e.endsWith(",")?e.slice(0,-1):e}handleStart(e){if("["!==e)return""===e?(this.objects.push(this.metaLines.join("")),void(this.startHandled=!0)):void this.metaLines.push(e)}handleLine(e,t){t?this.buffer+=e:this.buffer?(this.objects.push(this.buffer+e),this.buffer=""):this.objects.push(e)}parsePart(e){const t=e.endsWith("\n]"),n=e.split("\n");for(let s=0;s<n.length;s++){const e=n[s],a=s===n.length-1;a&&t||(this.startHandled?this.handleLine(e,a):this.handleStart(e,a))}try{const e=JSON.parse(`[${this.trimComma(this.objects.join(""))}]`);return this.objects=[],e}catch(a){throw console.log(`[${this.trimComma(this.objects.join(""))}]`),console.log(this.objects),console.log(this,{isLastPart:t,textPart:e}),a}}}let be=!1;const Se=o(null),we=o(null),_e=u(Se);u(we);const ke=o(new class extends SimpleEntry{constructor({name:e}={name:""}){super({name:e,type:"folder",pid:null},null),this.addMeta({})}get size(){return this.children.reduce(((e,t)=>e+t.size),0)}});globalThis.home=ke.value;const ze=t(!1);function clearHome(){console.log("clearHome"),clearSearch(),openFolder(re),we.value=null,Se.value=null,globalThis.root=null,globalThis.folder=null,ke.value.children=[],l(Ce)}const Te=u(ke),De=d(ze);function updateParsingState(){l(Ce)}const Ee=new class{constructor(){this.abortRequested=!1,this._promise=Promise.resolve(),this._resolve=()=>{}}abort(){return this.abortRequested=!0,this._promise}start(){this._promise=new Promise((e=>this._resolve=e))}abortIfRequested(){return!!Ee.abortRequested&&(this.abortRequested=!1,this._resolve(),!0)}};async function setScan(e,t=!1){ie.value&&await Ee.abort(),de.value=0,ie.value=!0,Ee.start();let n=!1,a=!1;const s=Date.now();let o,r=Date.now(),i=0;for await(const{meta:l,root:c,rootUpdated:u,processed:d}of parseScan(e)){if(i+=d,o){const e=(i/o*100).toPrecision(3);de.value=Number(e)}if(Ee.abortIfRequested())return console.log("[setScan][time][aborted]",Date.now()-s,"ms"),!1;!a&&c&&(!n&&l&&(c.meta=l,n=!0,o=l.total,i-=1),openFolder(c,t),a=!0);const e=Date.now();(u||e-r>50)&&(r=e,updateParsingState(),await sleep())}return updateParsingState(),console.log("[setScan][time]:",Date.now()-s,"ms"),ie.value=!1,!0}const Me=n((()=>{var e;return(null==(e=Se.value)?void 0:e.separator)||"/"})),xe=n((()=>{var e;return(null==(e=Se.value)?void 0:e.path)||[]})),Ce=o(re),Ie=n((()=>Ce.value.path));function openFolder(e,t=!1){var n;t||clearSearch(),Ce.value=e,Q.value=50;const a=e.root;globalThis.root=a,a.value=a,Se.value=a.meta||{},e!==ke.value&&((null==(n=ke.value.children)?void 0:n.includes(a))||(ke.value.addChild(a),l(ke))),ze.value=e===ke.value,globalThis.folder=e,console.log("globalThis.folder:",e)}Object.defineProperty(globalThis,"flat",{get(){var e;return null==(e=globalThis.folder)?void 0:e.flat()}});const Pe=n((()=>we.value&&Ce.value.isEmpty));r(Se,(async(e,t)=>{if(console.log("[meta]:",Se.value),!Se.value)return;const{files:n,folders:a,symlinks:s,errors:o,total:r,scanDate:i}=Se.value;Se.value.scanDate&&addMessage(`files: "${n}" folders: "${a}", symlinks: "${s}", errors: "${o}", total: "${r}", scanDate: "${dateToDayDateString(i)}"`)}));const _export_sfc=(e,t)=>{const n=e.__vccOpts||e;for(const[a,s]of t)n[a]=s;return n},$e={class:"scanPath"},je=["title"],Fe={class:"part"},Le={class:"part spaced"},Be={key:0,class:"spaced separator"},Re=_export_sfc({__name:"AddressBar_Base",setup(e){const t=n((()=>{if(!_e.value)return;const{files:e,folders:t,symlinks:n,charDevs:a,blockDevs:s,fifos:o,sockets:r,total:i,platform:l,scanDate:c}=_e.value;function doString(e){return Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>function(e){const t=3-Math.trunc(e.length/4);return e+"\t".repeat(t)}(e)+": "+t)).join("\n")}const u=doString({files:e,folders:t,symlinks:n}),d=doString({charDevs:a,blockDevs:s,fifos:o,sockets:r}),p=doString({total:i,platform:l,scanDate:c?dateToDayDateString(c):void 0}),f=doString(_e.value.special||{});let h;return h="win32"!==l?[u,d,p,f].filter((e=>e)).join("\n"):[u,p,f].filter((e=>e)).join("\n"),console.log(h),h})),a=n((()=>{var e;const t=[...xe.value,Ce.value.root.name].join(Me.value);return t.startsWith("//")?t.slice(1):"win32"===(null==(e=_e.value)?void 0:e.platform)?t[0].toUpperCase()+t.slice(1):t})),s=n((()=>[...a.value].slice(0,-1).join(""))),o=n((()=>[...a.value].slice(-1).join(""))),r=n((()=>Ie.value.length-1&&"/"!==a.value));function goToRoot(){const e=Ce.value.root;debugMessageFromEntry(e),openFolder(e)}return(e,n)=>(p(),f("span",$e,[h("span",{class:"parts",onClick:goToRoot,title:m(t)},[h("span",Fe,v(m(s)),1),h("span",Le,v(m(o)),1)],8,je),m(r)?(p(),f("span",Be,v(m(Me)),1)):g("",!0)]))}},[["__scopeId","data-v-c7e0debc"]]),We={class:"opened-folder"},Ae={class:"part"},Oe={class:"part spaced"},Ne={key:0,class:"separator spaced"},He=_export_sfc({__name:"AddressBar_Folder",props:["index","count","entry"],setup(e){const t=e,{index:a,count:s,entry:o}=y(t),r=n((()=>a.value+1===s.value)),i=n((()=>[...o.value.name].slice(0,-1).join(""))),l=n((()=>[...o.value.name].slice(-1).join("")));function onClick(){debugMessageFromEntry(o.value),openFolder(o.value)}return(e,t)=>(p(),f("span",We,[h("span",{class:"parts",onClick:onClick},[h("span",Ae,v(m(i)),1),h("span",Oe,v(m(l)),1)]),m(r)?g("",!0):(p(),f("span",Ne,v(m(Me)),1))]))}},[["__scopeId","data-v-ab2cb264"]]),Ue={class:"box"},qe=_export_sfc({__name:"AddressBar_Part",props:{maxWidth:{default:"max-content",type:String}},setup:e=>(t,n)=>(p(),f("div",Ue,[h("div",{class:"sub",style:S({maxWidth:e.maxWidth})},[b(t.$slots,"default",{},void 0,!0)],4)]))},[["__scopeId","data-v-9d685040"]]),Ge=_export_sfc({__name:"AddressBar",setup(e){async function onContextmenu(e){e.preventDefault();const t=[..._e.value.path,...Ce.value.path.map((e=>e.name))].join(Me.value);console.log("Copy to clipboard:",t),await navigator.clipboard.writeText(t)}return(e,t)=>(p(),f("div",{class:"address",onContextmenu:onContextmenu},[w(qe,null,{default:_((()=>[w(Re)])),_:1}),(p(!0),f(k,null,z(m(Ie).slice(1),((e,t)=>(p(),T(qe,null,{default:_((()=>[w(He,{entry:e,index:t,count:m(Ie).slice(1).length},null,8,["entry","index","count"])])),_:2},1024)))),256))],32))}},[["__scopeId","data-v-62bab457"]]),Ze={class:"search-wrapper"},Je={class:"search"},Ke=["onContextmenu"],Ve=(e=>(P("data-v-087396ca"),e=e(),$(),e))((()=>h("label",{for:"json-scan-search-input",class:"fuck-off-lighthouse"},".",-1))),Xe=_export_sfc({__name:"Search",setup(e){const n=t();function onClearClick(){clearSearch(),n.value.focus()}async function onContextMenu(){try{const e=await navigator.clipboard.readText();console.log("[clipboard] readText:",e),ve.value=e}catch(e){console.error("[clipboard] read failed",e)}}let a=0;function doubleShiftHandler(e){if("Shift"!==e.key)return;const t=Date.now();t-a<250?n.value.focus():a=t}return D((()=>document.addEventListener("keydown",doubleShiftHandler))),E((()=>document.removeEventListener("keydown",doubleShiftHandler))),(e,t)=>(p(),f("div",Ze,[h("div",Je,[M(h("input",{id:"json-scan-search-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>C(ve)?ve.value=e:null),ref_key:"inputRef",ref:n},null,512),[[x,m(ve)]]),h("button",{onClick:onClearClick,onContextmenu:I(onContextMenu,["prevent"]),title:"Right click to clear and paste"},"Clear",40,Ke)]),Ve]))}},[["__scopeId","data-v-087396ca"]]);class FileEntry{constructor({file:e,parent:t,type:n,name:a}){e&&(this.file=e),t&&(this.parent=t,t.addChild(this)),a&&(this._name=a),this.type=n}get name(){var e;return this._name||(null==(e=this.file)?void 0:e.name)}addChild(e){this.children||(this.children=[]),this.children.push(e),this.increaseContentSize(e.size)}increaseContentSize(e){e&&(this._contentSize||(this._contentSize=0),this._contentSize+=e,this.parent&&this.parent.increaseContentSize(e))}get size(){var e;return"folder"===this.type?this._contentSize||0:(null==(e=this.file)?void 0:e.size)||0}get mtime(){var e;return(null==(e=this.file)?void 0:e.lastModified)||0}get path(){return this.parent?[...this.parent.path,this]:[this]}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}flat(){return[...this]}static flat(e){return e.map((e=>[...e])).flat()}static async fromDataTransferItems(e){const t=await async function(e){const t=[];for(const n of e)t.push(await dtItemToFileSystemEntry(n));return t}(e);console.log("[fileSystemEntries]:",t);const n=[];for(const a of t)n.push(await fromFileSystemEntry(a));return n}static fromFiles(e){const t=[];for(const n of e)t.push(new FileEntry({file:n,type:"file"}));return t}}async function fromFileSystemEntry(e,t=null){if(e.isFile)try{const a=await(n=e,new Promise(((e,t)=>n.file(e,t))));return new FileEntry({file:a,type:"file",parent:t})}catch(a){return console.error("[fromFileSystemEntry][error]",e.name,a),null}else if(e.isDirectory){const n=new FileEntry({type:"folder",parent:t,name:e.name}),a=async function*(e){const t=e.createReader();let n=[];do{n=await new Promise(((e,n)=>t.readEntries(e,n)));for(const e of n)yield e}while(n.length)}(e);for await(const e of a)await fromFileSystemEntry(e,n);return n}var n}async function dtItemToFileSystemEntry(e){return e.webkitGetAsEntry()}const Ye=t([]),Qe=t([]),et=t(!1),tt=t(0),nt=t([]),at=t([]),st=t(!1);i((async()=>{const e=Date.now();st.value=!0,Qe.value.length?at.value=await FileEntry.fromDataTransferItems(Qe.value):at.value=FileEntry.fromFiles(Ye.value),st.value=!1,console.log("[FileEntry parsing][time]:",Date.now()-e,"ms"),console.log("[fileEntries]",s(at.value))}));const ot=n((()=>at.value[0])),rt=n((()=>at.value.length));function setDataTransfer(e){console.log(e),setFiles(e.files),function(e){const t=[...e];Qe.value=t,console.log("[setDtItems]:",t),console.log(t[0].kind),console.log(t[0].type)}(e.items)}function setFiles(e){const t=[...e];Ye.value=t,console.log("[setFiles]:",t)}const it={class:"default-hover-text"},lt=_export_sfc({__name:"FileInputDefaultHoverText",setup(e){const t=n((()=>{const e=tt.value>1?"s":"";return`Drop ${tt.value} file${e}`}));return(e,n)=>(p(),f("div",it,v(m(t)),1))}},[["__scopeId","data-v-61bd8bf1"]]),ct=["title"],ut={key:0,class:"parsing"},dt={key:1},pt={key:2,style:{display:"contents"}},ft=_export_sfc({__name:"FileInputDefaultText",setup(e){const t=n((()=>at.value.slice(0,50).map((e=>e.name)).join("\n")));return(e,n)=>(p(),f("div",{class:"default-prompt-text",title:m(t)},[m(st)?(p(),f("div",ut,"Parsing...")):m(rt)?(p(),f("div",dt,v(m(rt))+" file"+v(m(rt)>1?"s":""),1)):(p(),f("div",pt,[b(e.$slots,"default",{},(()=>[j("Select file")]),!0)]))],8,ct))}},[["__scopeId","data-v-5b4e0371"]]),ht=["accept","multiple"],vt={key:0,class:"content hover"},mt={key:1,class:"content selected"},gt={key:2,class:"content prompt"},yt=_export_sfc({__name:"FileInput",props:{globalDropZone:{type:Boolean,default:!0},accept:{type:String,default:"*/*"},multiple:{type:Boolean,default:!0}},setup(e){const a=e,{globalDropZone:s}=y(a);function onFileInputChange(e){setFiles(e.target.files),Qe.value=[]}const o=t(null),r=n((()=>s.value?document.body:o.value));function stopEvent(e){e.preventDefault(),e.stopPropagation()}function onDrop(e){stopEvent(e),et.value=!1,setDataTransfer(e.dataTransfer)}function onDragOver(e){stopEvent(e),e.dataTransfer.dropEffect="copy"}function onDragEnter(e){stopEvent(e),et.value||(et.value=!0,function(e){const t=e.items.length,n=[...e.items].map((e=>e.type)),a=[...new Set(n)];tt.value=t,nt.value=a,console.log("[setDataTransferHover]:",t,a)}(e.dataTransfer))}function onDragLeave(e){stopEvent(e),r.value.contains(e.relatedTarget)||(et.value=!1,tt.value=0,nt.value=[])}function onKeyDown(e){"Enter"===e.key&&o.value.querySelector("label").click()}return D((()=>{s.value||function(){const dragOverCallback=e=>{r.value.contains(e.target)||(stopEvent(e),e.dataTransfer.dropEffect="none")};document.body.addEventListener("dragover",dragOverCallback)}(),r.value.addEventListener("drop",onDrop),r.value.addEventListener("dragover",onDragOver),r.value.addEventListener("dragleave",onDragLeave),r.value.addEventListener("dragenter",onDragEnter)})),F((()=>{r.value.addEventListener("drop",onDrop),r.value.addEventListener("dragover",onDragOver),r.value.addEventListener("dragleave",onDragLeave),r.value.addEventListener("dragenter",onDragEnter)})),(t,n)=>(p(),f("div",{class:L(["file-input",{"drop-hover":m(et)}]),ref_key:"fileInputElem",ref:o,tabindex:"0",onKeydown:onKeyDown},[h("label",null,[h("input",{type:"file",accept:e.accept,multiple:e.multiple,onChange:onFileInputChange,style:{display:"none"}},null,40,ht),m(et)?(p(),f("span",vt,[b(t.$slots,"hover",{},(()=>[w(lt)]),!0)])):m(ot)&&!m(st)?(p(),f("span",mt,[b(t.$slots,"selected",{},(()=>[w(ft)]),!0)])):(p(),f("span",gt,[b(t.$slots,"prompt",{},(()=>[w(ft)]),!0)]))]),(p(),T(B,{to:"body"},[h("div",{class:L(["file-input-hover-modal",{"drop-hover":m(et)}])},null,2)]))],34))}},[["__scopeId","data-v-c792e914"]]),bt={class:"file-input-wrapper"},St=_export_sfc({__name:"FileInputWrapper",setup:e=>(r(at,(async()=>{clearHome(),le.value=!1,ce.value=at.value.length,ue.value=0;for(const{file:e}of at.value)ue.value++,await setScan(e,!0);at.value.length>1&&(openFolder(Te.value,!0),debugMessageFromEntry(Te.value)),le.value=!0})),(e,t)=>(p(),f("div",bt,[w(yt,{accept:"application/json,application/gzip",multiple:!0})])))},[["__scopeId","data-v-de23cba1"]]),wt=_export_sfc({__name:"Home",setup(e){const t=n((()=>{var e,t;return(null==(t=null==(e=Te.value)?void 0:e.children)?void 0:t.length)>1}));function onClick(){debugMessageFromEntry(Te.value),openFolder(Te.value)}function onContextMenu(e){e.preventDefault(),clearHome()}return(e,n)=>m(t)?(p(),f("div",{key:0,class:L(["home",{active:m(De)}]),onClick:onClick,onContextmenu:onContextMenu}," Home ",34)):g("",!0)}},[["__scopeId","data-v-13363939"]]),_t={class:"tabs"},kt=_export_sfc({__name:"Tabs",setup:e=>(e,t)=>(p(),f("div",_t,[w(St,{class:"tab"}),w(wt,{class:"tab"})]))},[["__scopeId","data-v-aaa932cb"]]),zt=["title"],Tt={class:"icon"},Dt=["title"],Et=["title"],Mt=_export_sfc({__name:"Row",props:["entry"],setup(e){const a=y(e).entry,s=n((()=>a.value.hasErrors?"":bytesToSizeWinLike(a.value.size))),o=n((()=>"0 B"===s.value?"Z":s.value.split(" ")[1])),r=n((()=>a.value.hasErrors)),l=n((()=>{if(void 0===a.value[Z.value])return"";return dateToDayDateTimeString(a.value[Z.value],!1).slice(0,-3)})),c=n((()=>a.value.hasErrors?JSON.stringify(a.value.errors[0],null," "):"symlink"===a.value.type?a.value.pathTo:void 0)),u=n((()=>{const e=a.value.type;if("folder"===e)return"📁";if("file"===e){const e=a.value.name;return function(e){const{ext:t}=e.match(/(?<ext>[^.]+)$/).groups;return H.includes(t.toLowerCase())}(e)?"🎦":function(e){const{ext:t}=e.match(/(?<ext>[^.]+)$/).groups;return U.includes(t.toLowerCase())}(e)?"🖼":function(e){const{ext:t}=e.match(/(?<ext>[^.]+)$/).groups;return q.includes(t.toLowerCase())}(e)?"🎵":"📄"}return"symlink"===e?"🔗":"👾"}));function onClick(e){debugMessageFromEntry(a.value),globalThis.c=globalThis.clicked=a.value,"folder"===a.value.type&&openFolder(a.value)}function onMousedown(e){1===e.button&&(e.preventDefault(),console.log(a.value.getPathString(a.value.root.meta),a.value),Ce.value!==a.value.parent&&openFolder(a.value.parent))}function onMouseover(e){ae.value=a.value}function onMouseleave(e){ae.value=null}const d=t(!1);return i((()=>{var e,t;if("symlink"===(null==(e=ae.value)?void 0:e.type)){const e=ae.value.pathTo,t=a.value.getPathString(a.value.root.meta);return void(d.value=e===t)}const n=!(null==(t=ae.value)?void 0:t.hardlinks);d.value&&n&&(d.value=!1),n||(d.value=ae.value.hardlinks.includes(a.value))})),(e,t)=>(p(),f("tr",{class:L(["row",{error:m(r),hoveredLink:d.value}]),onClick:onClick,onMousedown:onMousedown,onMouseover:onMouseover,onMouseleave:onMouseleave,title:m(c)},[h("td",Tt,v(m(u)),1),h("td",{class:"name",title:m(a).getPathString(m(a).root.meta)},v(m(a).name),9,Dt),h("td",{class:L(["size",m(o)]),title:m(tripleSizeGroups)(m(a).size)},v(m(s)),11,Et),h("td",{class:L(["time",{[m(Z)]:!0}])},v(m(l)),3)],42,zt))}},[["__scopeId","data-v-1ad1352e"]]),xt=_export_sfc({__name:"IntersectionRow",setup(e){const n=new IntersectionObserver((e=>{const[t]=e;t.isIntersecting&&ne.value>Q.value&&(Q.value=Q.value+50)})),a=t(null);return D((()=>{n.observe(a.value)})),F((()=>{n.disconnect()})),(e,t)=>(p(),f("div",{class:"intersection",ref_key:"intersection",ref:a},null,512))}},[["__scopeId","data-v-91b58eda"]]),_withScopeId$3=e=>(P("data-v-e1c2b9d6"),e=e(),$(),e),Ct={key:0,class:"rows"},It={key:1,class:"empty-message"},Pt=[_withScopeId$3((()=>h("span",null,"The folder is empty.",-1)))],$t={key:2,class:"error-message"},jt=_withScopeId$3((()=>h("h2",null,"Error",-1))),Ft=_withScopeId$3((()=>h("td",null,"syscall",-1))),Lt=_withScopeId$3((()=>h("td",null,"code",-1))),Bt=_withScopeId$3((()=>h("td",null,"errno",-1))),Rt=_export_sfc({__name:"Content",setup(e){R((e=>({"9c48529c":s.value})));const a=n((()=>!!Ce.value.hasErrors&&Ce.value.errors[0]));function onContextMenu(e){e.preventDefault(),Ce.value.parent&&openFolder(Ce.value.parent)}const s=t("880px");return D((()=>{const e=document.body.offsetWidth;if(e<1280){let t=880-(1280-e);t=t<140?140:t,s.value=`${t}px`}})),(e,t)=>(p(),f("div",{class:"content",onContextmenu:onContextMenu},[m(te).length?(p(),f("table",Ct,[h("tbody",null,[(p(!0),f(k,null,z(m(te),(e=>(p(),T(Mt,{entry:e,key:`${e.pathString}//${e.size}`},null,8,["entry"])))),128)),w(xt)])])):g("",!0),m(Pe)&&!m(a)?(p(),f("div",It,Pt)):g("",!0),m(a)?(p(),f("div",$t,[h("div",null,[jt,h("table",null,[h("tr",null,[Ft,h("td",null,[h("pre",null,v(m(a).syscall),1)])]),h("tr",null,[Lt,h("td",null,[h("pre",null,v(m(a).code),1)])]),h("tr",null,[Bt,h("td",null,[h("pre",null,v(m(a).errno),1)])])])])])):g("",!0)],32))}},[["__scopeId","data-v-e1c2b9d6"]]),Wt={class:"status"},At=_export_sfc({__name:"Status",setup(e){const t=n((()=>{var e;return(null==(e=ae.value)?void 0:e.size)&&bytesToSizeWinLike(ae.value.size)}));return(e,n)=>(p(),f("div",Wt,[h("span",null,"Items count: "+v(m(ne)),1),M(h("span",null,". Hover item's size: "+v(m(t)),513),[[W,m(ae)]])]))}},[["__scopeId","data-v-f9068cda"]]),Ot={class:"switch"},Nt=["title","onContextmenu"],Ht=_export_sfc({__name:"Switch",setup(e){function toggleTimeType(){Z.value="mtime"===Z.value?"btime":"mtime"}function onClick(e){J.value===e&&toggleOrder(),J.value=e}return(e,t)=>(p(),f("div",Ot,[h("button",{class:L(["order-by-name",{active:"name"===m(J)}]),title:"Order by name",onClick:t[0]||(t[0]=e=>onClick("name"))},v(m(K).name?"N":"n"),3),h("button",{class:L(["order-by-size",{active:"size"===m(J)}]),title:"Order by size",onClick:t[1]||(t[1]=e=>onClick("size"))},v(m(K).size?"S":"s"),3),h("button",{class:L(["order-by-time",{active:"time"===m(J),[m(Z)]:!0}]),title:"Order by "+m(Z),onClick:t[2]||(t[2]=e=>onClick("time")),onContextmenu:I(toggleTimeType,["prevent"])},v(m(K).time?"D":"d"),43,Nt)]))}},[["__scopeId","data-v-bae25d80"]]),Ut={class:"debug"},qt=_export_sfc({__name:"Debug",setup:e=>(e,t)=>(p(),f("div",Ut,[h("span",null,v(m(se)),1)]))},[["__scopeId","data-v-74baf769"]]),Gt={},Zt={class:"guide"},Jt=[A('<div class="text-wrapper" data-v-19ebf714><h2 data-v-19ebf714>No scan selected</h2><div data-v-19ebf714>Use your own directory scan file (created with <a href="https://github.com/AlttiRi/keep-lister#how-to-use" target="_blank" data-v-19ebf714>the scanner</a>). </div><div class="" data-v-19ebf714>Or use the demo scans to take a look at the program&#39;s work <span class="gray" data-v-19ebf714>(just click on the link)</span>: <ul data-v-19ebf714><li data-v-19ebf714><a href="./?filepath=https://alttiri.github.io/json-flat-scans/windows-admin.json.gz" data-v-19ebf714>Win 10 scan (as Admin)</a></li><li data-v-19ebf714><a href="./?filepath=https://alttiri.github.io/json-flat-scans/ubuntu-admin.json.gz" data-v-19ebf714>Ubuntu scan (as Root)</a></li><li data-v-19ebf714><a href="./?filepath=https://alttiri.github.io/json-flat-scans/linux-master.json.gz" data-v-19ebf714>Linux Source Code scan</a></li></ul></div><div class="gray" data-v-19ebf714>Also it supports mega.nz folder links (https://mega.nz/folder/ABcd12#XXX).<br data-v-19ebf714> Just paste them in the search field.</div><div data-v-19ebf714>For more info see the <a href="https://github.com/AlttiRi/keep-lister#keeplister" target="_blank" data-v-19ebf714>Readme</a>.</div></div>',1)];const Kt=_export_sfc(Gt,[["render",function(e,t){return p(),f("div",Zt,Jt)}],["__scopeId","data-v-19ebf714"]]),Vt={class:"inner-modal"};const Xt=_export_sfc({},[["render",function(e,t){return p(),f("div",Vt,[b(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-6b3a99be"]]),Yt=["title"],Qt=(e=>(P("data-v-f8d1ea96"),e=e(),$(),e))((()=>h("div",{class:"invisible"},null,-1))),en=_export_sfc({__name:"MemoryConsuming",setup(e){const a=t(performance.memory),s=n((()=>a.value.jsHeapSizeLimit)),o=n((()=>a.value.totalJSHeapSize));n((()=>a.value.usedJSHeapSize));const r=t(null),i=t(!1),l=t(!1),c=n((()=>{const e=o.value/(s.value/100);return i.value=e>100,i.value?100:e})),u=n((()=>bytesToSizeWinLike(o.value))),d=n((()=>a.value));function onMousedown(e){0===e.button&&(l.value=!0),1===e.button&&(e.preventDefault(),l.value=!1,console.clear())}return D((()=>{d.value&&(r.value=setInterval((()=>{a.value=performance.memory}),1e3))})),F((()=>{r.value&&clearInterval(r.value)})),(e,t)=>m(d)?(p(),f("div",{key:0,class:"memory-consuming-component",style:S({width:m(c)+"%"}),title:"Heap size: "+m(u)+(l.value?"\nUse middle mouse button click to clear the console.":""),onMousedown:onMousedown},[h("div",{class:L(["visible",{over100:i.value}])},null,2),Qt],44,Yt)):g("",!0)}},[["__scopeId","data-v-f8d1ea96"]]),tn=[(e=>(P("data-v-0026d99a"),e=e(),$(),e))((()=>h("div",{class:"visible"},null,-1)))],nn=_export_sfc({__name:"ScanProgressBar",setup(e){const n=t(!1);return i((async()=>{100===de.value&&(n.value=!0,await sleep(16),n.value=!1)})),(e,t)=>m(ie)||n.value?(p(),f("div",{key:0,class:"scan-parsing-progress-component",style:S({width:m(de)+"%"})},tn,4)):g("",!0)}},[["__scopeId","data-v-0026d99a"]]),an={class:"main"},sn=(e=>(P("data-v-2b40bd56"),e=e(),$(),e))((()=>h("a",{class:"readme",title:"Open Readme",href:"https://github.com/AlttiRi/keep-lister#keeplister",target:"_blank"},[h("i",null,"i")],-1))),on=_export_sfc({__name:"Main",setup(e){globalThis.bytesToSize=bytesToSize,globalThis.bytesToSizeWinLike=bytesToSizeWinLike;const t=n((()=>void 0===_e.value&&!new URL(location.href).searchParams.get("filepath")||null===_e.value));return D((async()=>{const e=new URL(location.href),t=e.searchParams.get("filepath"),n=e.searchParams.get("sort")||e.searchParams.get("order");if(["name","size","time"].includes(n)&&(J.value=n,["true","1"].includes(e.searchParams.get("desc"))&&toggleOrder()),t){const e=await fetch(t);await setScan(e)}const a=e.hash.slice(1);a.startsWith("https://mega.nz/")&&await handleMegaUrl(a);const s=e.searchParams.get("search");s&&(ve.value=s)})),(e,n)=>(p(),f("div",an,[w(en),w(nn),w(Ht,{style:{"grid-area":"switch"}}),w(Ge,{style:{"grid-area":"address"}}),w(Xe,{style:{"grid-area":"search"}}),w(kt,{style:{"grid-area":"tabs"}}),m(t)?(p(),T(Kt,{key:0,style:{"grid-area":"content"}})):m(ie)&&m(fe)?(p(),T(Xt,{key:1,style:{"grid-area":"content"}},{default:_((()=>[j(" [Search]: Scan parsing awaiting ("+v(m(ue))+" of "+v(m(ce))+") ",1)])),_:1})):(p(),T(Rt,{key:2,style:{"grid-area":"content"}})),w(At,{style:{"grid-area":"status"}}),w(qt,{style:{"grid-area":"debug"}}),sn]))}},[["__scopeId","data-v-2b40bd56"]]);O({__name:"App",setup:e=>(e,t)=>(p(),T(on))}).mount("#app");
//# sourceMappingURL=index.js.map
